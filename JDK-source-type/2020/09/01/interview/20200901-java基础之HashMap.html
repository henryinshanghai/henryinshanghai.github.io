<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=EB+Garamond:300,300italic,400,400italic,700,700italic|Roboto+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1.0.2/themes/blue/pace-theme-minimal.css">
  <script src="//cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"henryinshanghai.github.io","root":"/","scheme":"Muse","version":"8.0.0-rc.5","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"path":"search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>

  <meta name="description" content="javaé›†åˆç±»å‹ä¹‹HashMapå¯¹äºJDKæºç æ¥è¯´ï¼Œå®ƒæœ‰ç‚¹åƒå‰ä»–è°±ä¸­çš„Få’Œå¼¦ã€‚ç¬¬ä¸€é“åï¼Œè·¨è¿‡å»å°±ä¼šæ˜¯å¦ä¸€ç•ªé£æ™¯">
<meta property="og:type" content="article">
<meta property="og:title" content="javaåŸºç¡€ä¹‹HashMap">
<meta property="og:url" content="https://henryinshanghai.github.io/JDK-source-type/2020/09/01/interview/20200901-java%E5%9F%BA%E7%A1%80%E4%B9%8BHashMap.html">
<meta property="og:site_name" content="Henry&#39;s blog">
<meta property="og:description" content="javaé›†åˆç±»å‹ä¹‹HashMapå¯¹äºJDKæºç æ¥è¯´ï¼Œå®ƒæœ‰ç‚¹åƒå‰ä»–è°±ä¸­çš„Få’Œå¼¦ã€‚ç¬¬ä¸€é“åï¼Œè·¨è¿‡å»å°±ä¼šæ˜¯å¦ä¸€ç•ªé£æ™¯">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wSwlKe.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wSPg9e.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wSw93T.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wSDOzV.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wSryOU.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wSsanO.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wp8nzj.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpwKl8.jpg">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpBtMT.jpg">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpLK3t.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpOua4.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpX3kQ.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpjDDf.jpg">
<meta property="og:image" content="https://s1.ax1x.com/2020/09/02/wpvCIe.jpg">
<meta property="article:published_time" content="2020-09-01T02:30:00.000Z">
<meta property="article:modified_time" content="2020-09-02T12:43:29.569Z">
<meta property="article:author" content="henryInSH">
<meta property="article:tag" content="Java stuff">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2020/09/02/wSwlKe.png">


<link rel="canonical" href="https://henryinshanghai.github.io/JDK-source-type/2020/09/01/interview/20200901-java%E5%9F%BA%E7%A1%80%E4%B9%8BHashMap.html">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>javaåŸºç¡€ä¹‹HashMap | Henry's blog</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Henry's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Henry's blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">focus works better than curiosity</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <section class="post-toc-wrap sidebar-panel">
          <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#javaé›†åˆç±»å‹ä¹‹HashMap"><span class="nav-number">1.</span> <span class="nav-text">javaé›†åˆç±»å‹ä¹‹HashMap</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#å‰ç½®è¯´æ˜ï¼šä¸ºäº†è¡¨è¿°çš„ç»Ÿä¸€-amp-ç®€åŒ–è¡¨è¾¾"><span class="nav-number">1.1.</span> <span class="nav-text">å‰ç½®è¯´æ˜ï¼šä¸ºäº†è¡¨è¿°çš„ç»Ÿä¸€&amp;ç®€åŒ–è¡¨è¾¾</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HashMapçš„ç‰¹æ€§"><span class="nav-number">1.2.</span> <span class="nav-text">HashMapçš„ç‰¹æ€§</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#åŸç†ï¼ˆå­˜å‚¨é”®å€¼å¯¹çš„è¿‡ç¨‹ï¼‰"><span class="nav-number">1.3.</span> <span class="nav-text">åŸç†ï¼ˆå­˜å‚¨é”®å€¼å¯¹çš„è¿‡ç¨‹ï¼‰</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HashMapæºç åˆ†æ"><span class="nav-number">1.4.</span> <span class="nav-text">HashMapæºç åˆ†æ</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-HashMapçš„ç‰¹æ€§"><span class="nav-number">1.4.1.</span> <span class="nav-text">1 HashMapçš„ç‰¹æ€§</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-HashMapçš„å®ä¾‹å˜é‡ï¼ˆåŒ…å«åº•å±‚æ•°æ®ç»“æ„ï¼‰"><span class="nav-number">1.4.2.</span> <span class="nav-text">2 HashMapçš„å®ä¾‹å˜é‡ï¼ˆåŒ…å«åº•å±‚æ•°æ®ç»“æ„ï¼‰</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-HashMapçš„æ„é€ æ–¹æ³•"><span class="nav-number">1.4.3.</span> <span class="nav-text">3 HashMapçš„æ„é€ æ–¹æ³•</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-å¸¸ç”¨å¸¸é‡åˆ†æ"><span class="nav-number">1.4.4.</span> <span class="nav-text">4 å¸¸ç”¨å¸¸é‡åˆ†æ</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ ¸å¿ƒAPIs"><span class="nav-number">1.5.</span> <span class="nav-text">æ ¸å¿ƒAPIs</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#ä»é”®å€¼å¯¹é›†åˆä¸­æŸ¥è¯¢ï¼›"><span class="nav-number">1.5.1.</span> <span class="nav-text">ä»é”®å€¼å¯¹é›†åˆä¸­æŸ¥è¯¢ï¼›</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#éå†HashMapä¸­æ‰€æœ‰çš„key-value"><span class="nav-number">1.5.2.</span> <span class="nav-text">éå†HashMapä¸­æ‰€æœ‰çš„key-value</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#å‘å®¹å™¨ä¸­æ’å…¥æ–°çš„key-value"><span class="nav-number">1.5.3.</span> <span class="nav-text">å‘å®¹å™¨ä¸­æ’å…¥æ–°çš„key-value</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#å¯¹æ•£åˆ—è¡¨è¿›è¡Œæ‰©å®¹æ“ä½œ"><span class="nav-number">1.5.4.</span> <span class="nav-text">å¯¹æ•£åˆ—è¡¨è¿›è¡Œæ‰©å®¹æ“ä½œ</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#é“¾è¡¨æ ‘åŒ–"><span class="nav-number">1.5.5.</span> <span class="nav-text">é“¾è¡¨æ ‘åŒ–</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#çº¢é»‘æ ‘æ‹†åˆ†"><span class="nav-number">1.5.6.</span> <span class="nav-text">çº¢é»‘æ ‘æ‹†åˆ†</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#çº¢é»‘æ ‘é“¾åŒ–"><span class="nav-number">1.5.7.</span> <span class="nav-text">çº¢é»‘æ ‘é“¾åŒ–</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ä»å®¹å™¨ä¸­åˆ é™¤é”®å€¼å¯¹"><span class="nav-number">1.5.8.</span> <span class="nav-text">ä»å®¹å™¨ä¸­åˆ é™¤é”®å€¼å¯¹</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">1.6.</span> <span class="nav-text">æ€»ç»“</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#å‚è€ƒ"><span class="nav-number">1.7.</span> <span class="nav-text">å‚è€ƒ</span></a></li></ol></li></ol></div>
      </section>
      <!--/noindex-->

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="henryInSH"
      src="/images/myAvator.jpeg">
  <p class="site-author-name" itemprop="name">henryInSH</p>
  <div class="site-description" itemprop="description">collection & catagory & refine</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">37</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/henryinshanghai" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;henryinshanghai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2291972433@qq.com" title="E-Mail â†’ mailto:2291972433@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://github.com/CyC2018/CS-Notes/blob/master/notes/Leetcode%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.md" title="https:&#x2F;&#x2F;github.com&#x2F;CyC2018&#x2F;CS-Notes&#x2F;blob&#x2F;master&#x2F;notes&#x2F;Leetcode%20%E9%A2%98%E8%A7%A3%20-%20%E7%9B%AE%E5%BD%95.md" rel="noopener" target="_blank">Leecodeåˆ·é¢˜ç›®å½•</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.showdoc.cc/" title="https:&#x2F;&#x2F;www.showdoc.cc&#x2F;" rel="noopener" target="_blank">åœ¨çº¿Apiæ–‡æ¡£</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.processon.com/" title="https:&#x2F;&#x2F;www.processon.com&#x2F;" rel="noopener" target="_blank">åœ¨çº¿ä½œå›¾</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.atool9.com/colorpicker.php" title="http:&#x2F;&#x2F;www.atool9.com&#x2F;colorpicker.php" rel="noopener" target="_blank">åœ¨çº¿é¢œè‰²é€‰æ‹©å™¨</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.iconfont.cn/" title="https:&#x2F;&#x2F;www.iconfont.cn&#x2F;" rel="noopener" target="_blank">é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.ubuuk.com/" title="https:&#x2F;&#x2F;www.ubuuk.com&#x2F;" rel="noopener" target="_blank">è®¾è®¡</a>
        </li>
    </ul>
  </div>

      </section>
        <div class="back-to-top animated">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://henryinshanghai.github.io/JDK-source-type/2020/09/01/interview/20200901-java%E5%9F%BA%E7%A1%80%E4%B9%8BHashMap.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/myAvator.jpeg">
      <meta itemprop="name" content="henryInSH">
      <meta itemprop="description" content="collection & catagory & refine">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Henry's blog">
    </span>

    
    
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          javaåŸºç¡€ä¹‹HashMap
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-09-01 10:30:00" itemprop="dateCreated datePublished" datetime="2020-09-01T10:30:00+08:00">2020-09-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-09-02 20:43:29" itemprop="dateModified" datetime="2020-09-02T20:43:29+08:00">2020-09-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JDK-source-type/" itemprop="url" rel="index"><span itemprop="name">JDK source type</span></a>
                </span>
            </span>

          
            <span id="/JDK-source-type/2020/09/01/interview/20200901-java%E5%9F%BA%E7%A1%80%E4%B9%8BHashMap.html" class="post-meta-item leancloud_visitors" data-flag-title="javaåŸºç¡€ä¹‹HashMap" title="çƒ­åº¦">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">çƒ­åº¦ï¼š</span>
              <span class="leancloud-visitors-count"></span>
              <span>â„ƒ</span>
            </span>
            <span class="post-meta-item" title="çƒ­åº¦" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="far fa-eye"></i>
              </span>
              <span class="post-meta-item-text">çƒ­åº¦ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/JDK-source-type/2020/09/01/interview/20200901-java%E5%9F%BA%E7%A1%80%E4%B9%8BHashMap.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/JDK-source-type/2020/09/01/interview/20200901-java%E5%9F%BA%E7%A1%80%E4%B9%8BHashMap.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>9.7k</span>å­—
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>9 åˆ†é’Ÿ</span>åˆ†é’Ÿ
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h4 id="javaé›†åˆç±»å‹ä¹‹HashMap"><a href="#javaé›†åˆç±»å‹ä¹‹HashMap" class="headerlink" title="javaé›†åˆç±»å‹ä¹‹HashMap"></a>javaé›†åˆç±»å‹ä¹‹HashMap</h4><p>å¯¹äºJDKæºç æ¥è¯´ï¼Œå®ƒæœ‰ç‚¹åƒå‰ä»–è°±ä¸­çš„Få’Œå¼¦ã€‚ç¬¬ä¸€é“åï¼Œè·¨è¿‡å»å°±ä¼šæ˜¯å¦ä¸€ç•ªé£æ™¯</p>
<a id="more"></a>

<blockquote>
<p>bear in mind</p>
<p>1 HashMapæ˜¯ç”¨æ¥å­˜å‚¨é”®å€¼å¯¹çš„å®¹å™¨ï¼›</p>
<p>2 HashMapèƒ½å¤Ÿå®ç°O(1)æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾ï¼ˆæ ¹æ®keyæ¥æŸ¥æ‰¾å¯¹åº”çš„é”®å€¼å¯¹ï¼‰ï¼›</p>
<p>3 HashMapåº•å±‚çš„æ•°æ®ç»“æ„ä¸ºï¼šæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ï¼›</p>
</blockquote>
<h5 id="å‰ç½®è¯´æ˜ï¼šä¸ºäº†è¡¨è¿°çš„ç»Ÿä¸€-amp-ç®€åŒ–è¡¨è¾¾"><a href="#å‰ç½®è¯´æ˜ï¼šä¸ºäº†è¡¨è¿°çš„ç»Ÿä¸€-amp-ç®€åŒ–è¡¨è¾¾" class="headerlink" title="å‰ç½®è¯´æ˜ï¼šä¸ºäº†è¡¨è¿°çš„ç»Ÿä¸€&amp;ç®€åŒ–è¡¨è¾¾"></a>å‰ç½®è¯´æ˜ï¼šä¸ºäº†è¡¨è¿°çš„ç»Ÿä¸€&amp;ç®€åŒ–è¡¨è¾¾</h5><ul>
<li>æŠŠåº•å±‚ç»“æ„ä¸­çš„æ•°ç»„å«åšæ•£åˆ—æ•°ç»„/æ¡¶æ•°ç»„ï¼›</li>
</ul>
<blockquote>
<p>é‰´äºåªæœ‰æ–‡å­—è¯´æ˜æ—¶ï¼Œå†™å¾—æ²¡åŠ²ï¼Œçœ‹å¾—ä¹Ÿæ²¡åŠ²ã€‚æ‰€ä»¥è¿™æ¬¡ä¼šé…åˆæºç +å›¾è§£</p>
</blockquote>
<h5 id="HashMapçš„ç‰¹æ€§"><a href="#HashMapçš„ç‰¹æ€§" class="headerlink" title="HashMapçš„ç‰¹æ€§"></a>HashMapçš„ç‰¹æ€§</h5><p><em>æ³¨ï¼šåˆšå¼€å§‹å­¦è¿™äº›å®¹å™¨ç±»å‹æ—¶ï¼Œå‘ç°å®ƒä»¬æœ‰ç€å„ç§ä¸åŒçš„ç‰¹æ€§ï¼Œå¤šåˆ°æ— ä»è®°å¿†ã€‚å…¶å®æ‰€æœ‰è¿™äº›ç‰¹æ€§éƒ½æ˜¯å®¹å™¨ç±»å‹å®ç°çš„å…·ä½“ç»“æœï¼Œæ‰€ä»¥è¦è®°ä½è¿™äº›ä¸ªç‰¹æ€§ï¼Œçœ‹ä¸€çœ‹æºç å°±å¥½äº†</em></p>
<ul>
<li>1 é»˜è®¤çš„åˆå§‹å®¹é‡ä¸º16ï¼›</li>
<li>2 é»˜è®¤çš„è£…è½½å› å­ä¸º0.75;</li>
<li>3 åªæœ‰åœ¨é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°é‡ &gt; =8 å¹¶ä¸” HashMapä¸­çš„é”®å€¼å¯¹æ•°é‡ &gt; 64æ—¶ï¼Œæ‰ä¼šå¯¹é“¾è¡¨è¿›è¡Œæ ‘åŒ–ï¼›</li>
<li>4 å½“æ ‘åŒ–ä¸æ‰©å®¹å†²çªæ—¶ï¼Œåº”è¯¥ä¼˜å…ˆæ‰©å®¹ã€‚è¿™æ ·èƒ½å¤Ÿä»æ›´é«˜å±‚é¢è§£å†³é—®é¢˜</li>
</ul>
<h5 id="åŸç†ï¼ˆå­˜å‚¨é”®å€¼å¯¹çš„è¿‡ç¨‹ï¼‰"><a href="#åŸç†ï¼ˆå­˜å‚¨é”®å€¼å¯¹çš„è¿‡ç¨‹ï¼‰" class="headerlink" title="åŸç†ï¼ˆå­˜å‚¨é”®å€¼å¯¹çš„è¿‡ç¨‹ï¼‰"></a>åŸç†ï¼ˆå­˜å‚¨é”®å€¼å¯¹çš„è¿‡ç¨‹ï¼‰</h5><ul>
<li>1 è®¡ç®—key-valueä¸­keyçš„æ•£åˆ—å€¼ï¼›</li>
<li>2 ä½¿ç”¨æ•£åˆ—å€¼æ¥è®¡ç®—å¾—åˆ°key-valueåº”è¯¥æ’å…¥åˆ°æ•£åˆ—æ•°ç»„çš„å“ªä¸ªæ¡¶ä¸­ï¼›</li>
<li>3 åˆ¤æ–­æ¡¶æ˜¯ä¸æ˜¯ç©ºçš„ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥æ’å…¥key-valueï¼›</li>
<li>4 å¦‚æœæ¡¶ä¸æ˜¯ç©ºçš„ï¼Œè¯´æ˜ä¸åŒçš„é”®å€¼å¯¹è¢«æ˜ å°„åˆ°äº†æ•£åˆ—æ•°ç»„ç›¸åŒçš„æ¡¶ä¸­ï¼ˆaka å‘ç”Ÿäº†æ•£åˆ—å†²çªï¼‰ã€‚</li>
<li>5 å‘ç”Ÿæ•£åˆ—å†²çªåï¼Œå…ˆåˆ¤æ–­æ¡¶ä¸­çš„key-valueä¸é¢„æœŸæ’å…¥çš„key-valueçš„keyæ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œç›´æ¥æ›´æ–°æ¡¶ä¸­çš„key-valueçš„valueå€¼ï¼›</li>
<li>6 å¦‚æœä¸ç›¸ç­‰ï¼ŒæŠŠæ–°çš„key-valueä»¥é“¾è¡¨èŠ‚ç‚¹çš„å½¢å¼è¿æ¥åˆ°æ¡¶ä¸­å·²æœ‰çš„èŠ‚ç‚¹ä¸Šï¼›ã€Markï¼šä¸€èˆ¬é¢è¯•æ—¶ï¼Œå›ç­”åˆ°è¿™é‡Œå°±å·²ç»è¶³å¤Ÿäº†ã€‘</li>
<li>7 å½“é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°é‡å¤§äº8æ—¶ï¼ŒæŠŠé“¾è¡¨è½¬åŒ–æˆçº¢é»‘æ ‘ï¼ˆä»¥æå‡æŸ¥è¯¢æ•ˆç‡ï¼‰ï¼›ã€å…·ä½“æ‰‹æ®µæ¯”è¾ƒå¤æ‚ã€‘</li>
<li>8 å½“å“ˆå¸Œæ•°ç»„ä¸­çš„key-valueæ•°é‡å¤§äºé˜ˆå€¼ï¼ˆé˜ˆå€¼ = å®¹é‡ * åŠ è½½å› å­ï¼‰æ—¶ï¼Œéœ€è¦å¯¹æ•£åˆ—æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œå¹¶å¯¹æ¡¶ä¸­çš„é“¾è¡¨/çº¢é»‘æ ‘ä¸Šçš„key-valueè¿›è¡Œé‡æ–°å¸ƒå±€ï¼›ã€å…·ä½“æ‰‹æ®µæ¯”è¾ƒå¤æ‚ã€‘</li>
</ul>
<p>HashMapçš„key-valueå­˜å‚¨ç»“æœå›¾ï¼š<a href="https://blog-pictures.oss-cn-shanghai.aliyuncs.com/15161231547335.jpg">ç”°å°æ³¢</a></p>
<p><img src="https://s1.ax1x.com/2020/09/02/wSwlKe.png" alt="HashMapå­˜å‚¨èŠ‚ç‚¹çš„æ•ˆæœ"></p>
<h5 id="HashMapæºç åˆ†æ"><a href="#HashMapæºç åˆ†æ" class="headerlink" title="HashMapæºç åˆ†æ"></a>HashMapæºç åˆ†æ</h5><h6 id="1-HashMapçš„ç‰¹æ€§"><a href="#1-HashMapçš„ç‰¹æ€§" class="headerlink" title="1 HashMapçš„ç‰¹æ€§"></a>1 HashMapçš„ç‰¹æ€§</h6><p><img src="https://s1.ax1x.com/2020/09/02/wSPg9e.png" alt="HashMapç‰¹æ€§è¯´æ˜"></p>
<p>è¿™äº›å¤§æ®µå¤§æ®µçš„ä»‹ç»çš„ç¡®å¾ˆå“äººï¼Œè¿™æ—¶å€™å°±éœ€è¦ç‚¹å­è€å¿ƒäº†ã€‚å…¶å®è¿™åªæ˜¯ä½ æƒ³è±¡å‡ºæ¥çš„æ— æ³•è·¨è¶Šçš„äººè¡Œé“ç½¢äº† </p>
<p>ä¸Šé¢çš„å›¾ç‰‡å¼•ç”¨è‡ª<a href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247484139&idx=1&sn=bb73ac07081edabeaa199d973c3cc2b0&chksm=ebd743eadca0cafc532f298b6ab98b08205e87e37af6a6a2d33f5f2acaae245057fa01bd93f4&scene=21#wechat_redirect">Java3y</a></p>
<p><font size="3">ä½¿ç”¨æœ‰é“è¯å…¸ç¿»è¯‘äº†æºç ä¸Šçš„æ³¨é‡Š &amp; ç¿»è¯‘äº†JDKæä¾›çš„HashMapçš„æ¥å£æ–‡æ¡£ã€‚ä¸¤è€…å†…å®¹åŸºæœ¬ä¸€è‡´ï¼Œå»ºè®®å‚è€ƒæ¥å£æ–‡æ¡£ï¼ˆæ¯•ç«Ÿå®ƒå°±æ˜¯ç”¨æºç ç”Ÿæˆçš„ï¼‰</font></p>
<blockquote>
<p>ç‰¹æ€§æ€»ç»“</p>
</blockquote>
<ul>
<li>å…è®¸ç©ºé”®ä¸ç©ºå€¼ï¼›</li>
<li>å­˜å‚¨æ—¶ï¼Œä¸ä¿è¯key-valueçš„é¡ºåºå°±æ˜¯æ’å…¥æ—¶çš„é¡ºåºï¼›</li>
<li>è£…è½½å› å­å¯¹è¿­ä»£key-valueå¯¹çš„æ€§èƒ½æœ‰å¾ˆå¤§å½±å“ï¼›</li>
<li>å½“key-valueå¯¹çš„æ•°é‡ &gt; æ•£åˆ—æ•°ç»„çš„å®¹é‡ * è£…è½½å› å­æ—¶ï¼Œä¼šåˆ›å»ºæ–°çš„æ•£åˆ—æ•°ç»„ï¼ˆå¤§å°æ˜¯æ—§æ•°ç»„çš„ä¸¤å€ï¼‰ï¼Œå¹¶å¯¹key-valueè¿›è¡Œé‡å“ˆå¸Œï¼›</li>
<li>é»˜è®¤è£…è½½å› å­0.75æ˜¯åœ¨æ—¶é—´ä¸ç©ºé—´ä¸Šå¦¥åçš„ç»“æœï¼Œè£…è½½å› å­è¶Šå¤§ï¼Œè¶ŠèŠ‚çœç©ºé—´ï¼Œä½†æ˜¯è®¿é—®key-valueçš„æ—¶é—´å°±ä¼šéšä¹‹å¢é•¿ã€‚åä¹‹äº¦ç„¶</li>
<li>HashMapæ²¡æœ‰å®ç°å¤šçº¿ç¨‹åŒæ­¥çš„é€»è¾‘ï¼Œæ‰€ä»¥å¤šçº¿ç¨‹æ“ä½œæ˜¯ä¸å®‰å…¨çš„ï¼›</li>
<li>éå†HashMapçš„è¿­ä»£å™¨æ—¶ï¼Œå¦‚æœæœ‰å…¶ä»–çº¿ç¨‹åœ¨ä¿®æ”¹å“ˆå¸Œè¡¨ï¼Œå°±ä¼šé©¬ä¸ŠæŠ›å‡ºå¹¶å‘ä¿®æ”¹çš„å¼‚å¸¸ï¼›</li>
</ul>
<blockquote>
<p>HashMapçš„ç±»ç»§æ‰¿ç»“æ„</p>
</blockquote>
<p><img src="https://s1.ax1x.com/2020/09/02/wSw93T.png" alt="HashMapç±»ç»§æ‰¿ç»“æ„"></p>
<p><font size=3>ä¸ºä»€ä¹ˆè¦çœ‹å®ƒçš„ç±»ç»§æ‰¿ç»“æ„å‘¢ï¼Ÿ</font></p>
<p>è¿™æ ·èƒ½å¤Ÿç›´è§‚åœ°çŸ¥é“HashMapé¢„æœŸä¼šæœ‰å“ªäº›åŠŸèƒ½ï¼Œç„¶åå¯ä»¥åœ¨çœ‹æºç çš„æ—¶å€™æœ‰çš„æ”¾çŸ¢åœ°æŸ¥çœ‹æºç æ˜¯å¦‚ä½•å®ç°è¿™äº›åŠŸèƒ½çš„ã€‚</p>
<h6 id="2-HashMapçš„å®ä¾‹å˜é‡ï¼ˆåŒ…å«åº•å±‚æ•°æ®ç»“æ„ï¼‰"><a href="#2-HashMapçš„å®ä¾‹å˜é‡ï¼ˆåŒ…å«åº•å±‚æ•°æ®ç»“æ„ï¼‰" class="headerlink" title="2 HashMapçš„å®ä¾‹å˜é‡ï¼ˆåŒ…å«åº•å±‚æ•°æ®ç»“æ„ï¼‰"></a>2 HashMapçš„å®ä¾‹å˜é‡ï¼ˆåŒ…å«åº•å±‚æ•°æ®ç»“æ„ï¼‰</h6><p><font size=2>è¿™é‡Œä¸æƒ³å†å€Ÿåˆ«äººçš„å›¾ï¼Œä½†æ˜¯å´æ²¡æœ‰å¥½ç”¨çš„æˆªé•¿å›¾ä¸æˆªå›¾æ ‡æ³¨å·¥å…·ã€‚é¥¶äº†äº›ç‹—å°¾å·´åœˆå­ğŸ˜³</font></p>
<p>æ³¨ï¼šæ¥å£æ–‡æ¡£ä¸­æ²¡æœ‰å…³äºæˆå‘˜å±æ€§çš„è¯´æ˜ï¼Œå› ä¸ºæ¥å£æ–‡æ¡£æ˜¯æ•™ä¼šç”¨æˆ·å¦‚ä½•ä½¿ç”¨çš„ï¼Œå¹¶ä¸æƒ³æŠŠåº•å±‚å®ç°å‘ˆç°å‡ºæ¥ï¼›</p>
<ul>
<li><p>æˆå‘˜å¸¸é‡ï¼›</p>
<p>â€‹    <img src="https://s1.ax1x.com/2020/09/02/wSDOzV.png" alt="æˆå‘˜å¸¸é‡"></p>
<ul>
<li>ä½œç”¨ï¼šå„ç§åœºæ™¯ä¸‹å¯¹åº”çš„é»˜è®¤å€¼ï¼ˆé€šè¿‡å¸¸é‡çš„åç§°åŸºæœ¬èƒ½äº†è§£å…¶ä½¿ç”¨åœºåˆï¼‰</li>
</ul>
</li>
<li><p>æˆå‘˜å˜é‡ï¼›</p>
<p>â€‹    <img src="https://s1.ax1x.com/2020/09/02/wSryOU.png" alt="æˆå‘˜å˜é‡"></p>
<ul>
<li>ä½œç”¨ï¼šä½œä¸ºåº•å±‚çš„æ•°æ®ç»“æ„ï¼Œä»¥æ”¯æŒå„ç§APIçš„æ“ä½œï¼›<ul>
<li>table    ä½œç”¨ï¼šä½œä¸ºæ•£åˆ—æ•°ç»„ï¼›</li>
<li>loadFacotr   ä½œç”¨ï¼šå“ˆå¸Œè¡¨çš„åŠ è½½å› å­ï¼ˆç”¨äºè®¡ç®—æ‰©å®¹æ—¶çš„é—¨æ§›ï¼‰ï¼›</li>
<li></li>
</ul>
</li>
</ul>
</li>
<li><p>æˆå‘˜å†…éƒ¨ç±»ï¼›</p>
<p><img src="https://s1.ax1x.com/2020/09/02/wSsanO.png" alt="HashMapæˆå‘˜å†…éƒ¨ç±»"></p>
<ul>
<li><p>ä½œç”¨ï¼šä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ï¼Œæ”¯æŒå„ç§APIæ“ä½œï¼›</p>
<blockquote>
<p> æ ¸å¿ƒå†…éƒ¨ç±»è¯´æ˜ï¼›</p>
</blockquote>
<ul>
<li>Node    ä½œç”¨ï¼šå°è£…key-valueæ˜ å°„å…³ç³»ï¼Œè¡¨ç¤ºå“ˆå¸Œè¡¨ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼›</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">        <span class="keyword">final</span> K key; <span class="comment">// é”®å€¼å¯¹ä¸­çš„key</span></span><br><span class="line">        V value; <span class="comment">// é”®å€¼å¯¹ä¸­çš„value</span></span><br><span class="line">        Node&lt;K,V&gt; next; <span class="comment">// é“¾è¡¨ç»“æ„ä¸­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span></span><br><span class="line">    	...</span><br></pre></td></tr></table></figure>

<ul>
<li>TreeNode ä½œç”¨ï¼šè¡¨ç¤ºçº¢é»‘æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼›</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">LinkedHashMap</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        TreeNode&lt;K,V&gt; parent;  <span class="comment">// red-black tree links	æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆ</span></span><br><span class="line">        TreeNode&lt;K,V&gt; left; <span class="comment">// æŒ‡å‘å·¦å­èŠ‚ç‚¹çš„æŒ‡é’ˆ</span></span><br><span class="line">        TreeNode&lt;K,V&gt; right; <span class="comment">// æŒ‡å‘å³å­èŠ‚ç‚¹çš„æŒ‡é’ˆ</span></span><br><span class="line">        TreeNode&lt;K,V&gt; prev;    <span class="comment">// needed to unlink next upon deletionï¼ˆåˆ é™¤åéœ€è¦å–æ¶ˆé“¾æ¥ï¼‰ </span></span><br><span class="line">        <span class="keyword">boolean</span> red; <span class="comment">// æ˜¯å¦ä¸ºçº¢è‰²èŠ‚ç‚¹</span></span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h6 id="3-HashMapçš„æ„é€ æ–¹æ³•"><a href="#3-HashMapçš„æ„é€ æ–¹æ³•" class="headerlink" title="3 HashMapçš„æ„é€ æ–¹æ³•"></a>3 HashMapçš„æ„é€ æ–¹æ³•</h6><p>ä½œç”¨ï¼š</p>
<ul>
<li>è§„å®šç¨‹åºå‘˜ä½¿ç”¨HashMapçš„è¯­æ³•ï¼›</li>
<li>åˆ›å»ºå‡ºHashMapçš„å®ä¾‹å¯¹è±¡ï¼›</li>
<li>å¼ºåˆ¶ç¨‹åºå‘˜ä¸ºæŸäº›æˆå‘˜å±æ€§ç»‘å®šå€¼ï¼›</li>
</ul>
<p>åˆ†æåº•å±‚åŸç†æ—¶ï¼Œæ„é€ æ–¹æ³•ä¼¼ä¹å¹¶ä¸é‡è¦ã€‚ä¸ç®¡ç”¨æˆ·å†³å®šç”¨å“ªç§æ„é€ æ–¹æ³•ï¼Œæ ¸å¿ƒAPIçš„é€»è¾‘ä¸ä¼šå—åˆ°ä»»ä½•å½±å“ã€‚æ‰€ä»¥è¿™é‡Œåªåˆ†ææœ€å¸¸ç”¨çš„æ„é€ æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œåªæ˜¯ä¸ºloadFactorå±æ€§è¿›è¡Œäº†åˆå§‹åŒ–ï¼ˆç»‘å®šäº†å€¼ï¼‰ï¼›è€Œå“ˆå¸Œè¡¨éƒ½è¿˜æ²¡æœ‰åˆ›å»ºä¸åˆå§‹åŒ–â€”â€”å› ä¸ºè¿™ä¸ªæ“ä½œæ˜¯åœ¨ç¬¬ä¸€æ¬¡æ’å…¥key-valueçš„æ—¶å€™å®ç°çš„ã€‚</p>
<h6 id="4-å¸¸ç”¨å¸¸é‡åˆ†æ"><a href="#4-å¸¸ç”¨å¸¸é‡åˆ†æ" class="headerlink" title="4 å¸¸ç”¨å¸¸é‡åˆ†æ"></a>4 å¸¸ç”¨å¸¸é‡åˆ†æ</h6><ul>
<li>åˆå§‹å®¹é‡initialCapacity;<ul>
<li>ä½œç”¨ï¼šæŒ‡å®šæ•£åˆ—æ•°ç»„çš„åˆå§‹å®¹é‡å¤§å°ï¼›</li>
</ul>
</li>
<li>è´Ÿè½½å› å­loadFactorï¼›<ul>
<li>ä½œç”¨ï¼šè®¡ç®—æ•£åˆ—ï¼ˆæ¡¶ï¼‰æ•°ç»„çš„æ‰©å®¹é—¨æ§›ï¼›</li>
</ul>
</li>
<li>æ‰©å®¹é—¨æ§›thresholdï¼›<ul>
<li>ä½œç”¨ï¼šå£°æ˜å½“å‰HashMapæ‰€èƒ½å­˜å‚¨key-valueå¯¹çš„æœ€å¤§æ•°é‡ï¼›å¦‚æœç»§ç»­æ’å…¥key-valueï¼Œä¼šå¼•å‘æ•£åˆ—æ•°ç»„çš„æ‰©å®¹æ“ä½œï¼›</li>
</ul>
</li>
</ul>
<p>ä¸‰è€…ä¹‹é—´çš„å…³ç³»ï¼šthreshold = initialCapacity * loadFactor;</p>
<h5 id="æ ¸å¿ƒAPIs"><a href="#æ ¸å¿ƒAPIs" class="headerlink" title="æ ¸å¿ƒAPIs"></a>æ ¸å¿ƒAPIs</h5><h6 id="ä»é”®å€¼å¯¹é›†åˆä¸­æŸ¥è¯¢ï¼›"><a href="#ä»é”®å€¼å¯¹é›†åˆä¸­æŸ¥è¯¢ï¼›" class="headerlink" title="ä»é”®å€¼å¯¹é›†åˆä¸­æŸ¥è¯¢ï¼›"></a>ä»é”®å€¼å¯¹é›†åˆä¸­æŸ¥è¯¢ï¼›</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt; e;</span><br><span class="line">    	<span class="comment">// è®¡ç®—keyçš„hashå€¼ï¼Œå¹¶ä½œä¸ºå‚æ•°ä¼ å…¥getNode()æ–¹æ³•ä¸­</span></span><br><span class="line">        <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">    	<span class="comment">// å‡†å¤‡éœ€è¦çš„å±€éƒ¨å˜é‡ï¼štab-æ•£åˆ—æ•°ç»„ï¼› firstã€e-èŠ‚ç‚¹ã€n-æ•£åˆ—æ•°ç»„çš„é•¿åº¦ã€k-é”®çš„ç±»å‹ï¼›</span></span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">    	<span class="comment">// å¦‚æœæ•£åˆ—æ•°ç»„ä¸ä¸ºç©º &amp;&amp; keyæ˜ å°„åˆ°çš„æ¡¶ä¸ä¸ºç©º...</span></span><br><span class="line">    	<span class="comment">// ä»»åŠ¡ï¼šæ±‚å‡ºkeyæ‰€æ˜ å°„åˆ°çš„æ¡¶ï¼›	æ‰‹æ®µ1ï¼šhash % n	æ‰‹æ®µ2ï¼š(n-1) &amp; hash</span></span><br><span class="line">    	<span class="comment">// è¯´æ˜ï¼šåªæœ‰åœ¨nç­‰äº2çš„ä¹˜æ–¹æ—¶ï¼Œæ‰ä¼šæœ‰ï¼š hash % n &lt;=&gt; (n-1) &amp; hash</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">            (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ¡¶ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯å¾…æŸ¥æ‰¾çš„é”®å€¼å¯¹</span></span><br><span class="line">            <span class="comment">// æ‰‹æ®µï¼š1 åˆ¤æ–­èŠ‚ç‚¹çš„hashå€¼ä¸keyçš„hashå€¼æ˜¯å¦ç›¸ç­‰ï¼› 2 åˆ¤æ–­èŠ‚ç‚¹çš„keyä¸keyæ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">            <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">                ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                <span class="keyword">return</span> first;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¦åˆ™ï¼Œä»æ¡¶ä¸­ç»§ç»­æŸ¥æ‰¾</span></span><br><span class="line">            <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­æ¡¶ä¸­çš„èŠ‚ç‚¹æ˜¯ä¸æ˜¯æ ‘èŠ‚ç‚¹...</span></span><br><span class="line">                <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">                <span class="comment">// å¦åˆ™ï¼Œæ¡¶ä¸­ä¸€å®šæ˜¯ä¸€ä¸ªé“¾è¡¨</span></span><br><span class="line">                <span class="comment">// éå†é“¾è¡¨è¿›è¡ŒæŸ¥æ‰¾</span></span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">return</span> e;</span><br><span class="line">                &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    	<span class="comment">// éƒ½æ²¡èƒ½æ‰¾åˆ°ï¼Œåˆ™è¿”å›null</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµç¨‹</p>
</blockquote>
<ul>
<li>1 æ‰¾åˆ°keyæ‰€æ˜ å°„åˆ°çš„æ•£åˆ—æ•°ç»„ä¸­æ¡¶çš„ä½ç½®ï¼ˆæ¡¶å°±æ˜¯æ•£åˆ—æ•°ç»„ä¸­çš„ä¸€ä¸ªä½ç½®ï¼‰ï¼›</li>
<li>2 ä»æ¡¶ä¸­çš„é“¾è¡¨/çº¢é»‘æ ‘æ¥æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨é”®ä¸ºkeyçš„èŠ‚ç‚¹ï¼›</li>
</ul>
<blockquote>
<p>å…³é”®æ“ä½œ</p>
</blockquote>
<ul>
<li>1 è®¡ç®—keyä¼šæ˜ å°„åˆ°çš„æ¡¶çš„ä½ç½®ï¼›<ul>
<li>æ‰‹æ®µï¼š(n - 1) &amp; hashï¼›    </li>
<li>ç‰¹å¾ï¼š1 é«˜æ•ˆçš„ä½è¿ç®—ï¼› 2 nçš„å€¼å¿…é¡»æ˜¯2çš„ä¹˜æ–¹ï¼›3 ç­‰ä»·äº(hash % n);</li>
</ul>
</li>
<li>2 è®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼›<ul>
<li>æ‰‹æ®µ: å†…ç½®çš„hash(Object key)æ–¹æ³•ï¼›</li>
<li>SOPï¼š1 è°ƒç”¨keyçš„hashCode()æ–¹æ³•ï¼Œåˆæ¬¡è·å–åˆ°hashå€¼ï¼›2 æŠŠhæ— ç¬¦å·å³ç§»16ä½å¾—åˆ°ä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶æ•°å­—ï¼› 3 æŠŠ1ä¸2çš„å€¼è¿›è¡Œ^ï¼ˆå¼‚æˆ–è¿ç®—ï¼‰ï¼›</li>
<li>åŸå› ï¼ˆHashMapä¸ºä»€ä¹ˆè¿™æ ·è®¡ç®—å“ˆå¸Œå€¼ï¼‰ï¼š<ul>
<li>ç§»ä½æ“ä½œ-1ï¼šé€šè¿‡è¿™ç§æ–¹å¼ï¼Œè®©é«˜ä½æ•°æ®ä¸ä½ä½æ•°æ®è¿›è¡Œå¼‚æˆ–ï¼Œä»¥æ­¤åŠ å¤§ä½ä½ä¿¡æ¯çš„éšæœºæ€§ï¼Œå˜ç›¸çš„è®©é«˜ä½æ•°æ®å‚ä¸åˆ°è®¡ç®—ä¸­ï¼›</li>
<li>ç§»ä½æ“ä½œ-2ï¼šåœ¨ Java ä¸­ï¼ŒhashCode æ–¹æ³•äº§ç”Ÿçš„ hash æ˜¯ int ç±»å‹ï¼Œ32 ä½å®½ã€‚å‰16ä½ä¸ºé«˜ä½ï¼Œå16ä½ä¸ºä½ä½ï¼Œæ‰€ä»¥è¦å³ç§»16ä½;</li>
<li>å¼‚æˆ–æ“ä½œï¼šé€šè¿‡ç§»ä½å’Œå¼‚æˆ–è¿ç®—ï¼Œå¯ä»¥è®© hash å˜å¾—æ›´å¤æ‚ï¼Œè¿›è€Œå½±å“ hash çš„åˆ†å¸ƒæ€§ï¼›</li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="éå†HashMapä¸­æ‰€æœ‰çš„key-value"><a href="#éå†HashMapä¸­æ‰€æœ‰çš„key-value" class="headerlink" title="éå†HashMapä¸­æ‰€æœ‰çš„key-value"></a>éå†HashMapä¸­æ‰€æœ‰çš„key-value</h6><p><font size=3>æ³¨:éå†çš„æ“ä½œåˆ†ä¸ºä¸¤æ­¥â€”â€”1 è·å–åˆ°é”®é›†åˆ / é”®å€¼å¯¹Entryé›†åˆï¼› 2 ä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼æ¥éå†é”®å€¼å¯¹ï¼›</font></p>
<blockquote>
<p>ç”¨æ³•</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æ³•1-è·å–åˆ°æ‰€æœ‰çš„é”®ç»„æˆçš„é›†åˆ	ç„¶åä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼è¿›è¡Œéå†</span></span><br><span class="line"><span class="keyword">for</span>(Object key : map.keySet()) &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡map.get(key)æ–¹æ³•è·å–åˆ°å…³è”çš„value</span></span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨æ³•2-è·å–åˆ°æ‰€æœ‰çš„é”®å€¼å¯¹ç»„æˆçš„é›†åˆ	ç„¶åä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼è¿›è¡Œéå†</span></span><br><span class="line"><span class="keyword">for</span>(HashMap.Entry entry : map.entrySet()) &#123;</span><br><span class="line">    <span class="comment">// Entryå¯¹è±¡å°±æ˜¯å°è£…å¥½çš„key-value</span></span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ç§éå†é›†åˆçš„ç»Ÿä¸€æ–¹å¼ï¼Œakaï¼Œç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨ç¡®å®šçš„APIæ¥ç¼–å†™è¿­ä»£çš„ä»£ç ï¼›</p>
<blockquote>
<p>æµç¨‹ï¼ˆéå†é”®é›†åˆï¼‰</p>
</blockquote>
<ul>
<li>1 é¦–å…ˆè¦è·å–é”®é›†åˆ<code>KeySet</code>å¯¹è±¡ï¼›</li>
<li>2 å†é€šè¿‡ KeySet çš„è¿­ä»£å™¨<code>KeyIterator</code>ï¼ˆç»§æ‰¿è‡ªHashIteratorï¼‰è¿›è¡Œéå†ï¼›</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”®é›†åˆçš„ç±»å‹</span></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">KeySet</span> <span class="keyword">extends</span> <span class="title">AbstractSet</span>&lt;<span class="title">K</span>&gt; </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// è¿­ä»£å™¨æ¨¡å¼	è¦æ±‚ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼›    </span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Iterator&lt;K&gt; <span class="title">iterator</span><span class="params">()</span>     </span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> KeyIterator(); &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”®-è¿­ä»£å™¨ç±»å‹</span></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">KeyIterator</span> <span class="keyword">extends</span> <span class="title">HashIterator</span></span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">K</span>&gt; </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> K <span class="title">next</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> nextNode().key; &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç±»è¿­ä»£å™¨ç±»å‹</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HashIterator</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt; next;        <span class="comment">// next entry to return</span></span><br><span class="line">        Node&lt;K,V&gt; current;     <span class="comment">// current entry</span></span><br><span class="line">        <span class="keyword">int</span> expectedModCount;  <span class="comment">// for fast-fail</span></span><br><span class="line">        <span class="keyword">int</span> index;             <span class="comment">// current slot</span></span><br><span class="line"></span><br><span class="line">        HashIterator() &#123;</span><br><span class="line">            expectedModCount = modCount;</span><br><span class="line">            Node&lt;K,V&gt;[] t = table;</span><br><span class="line">            current = next = <span class="keyword">null</span>;</span><br><span class="line">            index = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (t != <span class="keyword">null</span> &amp;&amp; size &gt; <span class="number">0</span>) &#123; <span class="comment">// advance to first entry</span></span><br><span class="line">                <span class="comment">// å¯»æ‰¾ç¬¬ä¸€ä¸ªåŒ…å«é“¾è¡¨èŠ‚ç‚¹å¼•ç”¨çš„æ¡¶</span></span><br><span class="line">                <span class="keyword">do</span> &#123;&#125; <span class="keyword">while</span> (index &lt; t.length &amp;&amp; (next = t[index++]) == <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    	...</span><br><span class="line">        <span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">nextNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="keyword">if</span> ((next = (current = e).next) == <span class="keyword">null</span> &amp;&amp; (t = table) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// å¯»æ‰¾ä¸‹ä¸€ä¸ªåŒ…å«é“¾è¡¨èŠ‚ç‚¹å¼•ç”¨çš„æ¡¶</span></span><br><span class="line">                <span class="keyword">do</span> &#123;&#125; <span class="keyword">while</span> (index &lt; t.length &amp;&amp; (next = t[index++]) == <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> e;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p> å…³é”®æ“ä½œ(åœ¨HashIteratorä¸­å®Œæˆ)</p>
</blockquote>
<ul>
<li>1 ä»æ¡¶æ•°ç»„ä¸­æ‰¾åˆ°åŒ…å«é“¾è¡¨èŠ‚ç‚¹å¼•ç”¨çš„æ¡¶ï¼›</li>
<li>2 å¯¹è¿™ä¸ªæ¡¶æŒ‡å‘çš„é“¾è¡¨è¿›è¡Œéå†ï¼›</li>
<li>3 éå†å®Œæˆåï¼Œå†ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªåŒ…å«é“¾è¡¨èŠ‚ç‚¹å¼•ç”¨çš„æ¡¶.so on and so forth, till  can not find such a bucket;</li>
</ul>
<blockquote>
<p>æ“ä½œè¿‡ç¨‹å›¾ç¤º</p>
</blockquote>
<p><img src="https://s1.ax1x.com/2020/09/02/wp8nzj.png" alt="éå†é”®é›†åˆçš„è¿‡ç¨‹"></p>
<blockquote>
<p>éªŒè¯</p>
</blockquote>
<p>åŸç†ï¼šå¦‚æœåœ¨åˆ›å»ºHashMapæ—¶æŒ‡å®šå®¹å™¨çš„å¤§å°ä¸º16ï¼Œå¹¶åœ¨æ’å…¥key-valueæ—¶æ ¹æ®16æ¥é€‰æ‹©åˆé€‚çš„keyã€‚å°±èƒ½æŠŠkey-valueæ’å…¥åˆ°é¢„æœŸçš„æ¡¶ä¸­ï¼Œå¹¶æœ€ç»ˆé¢„æµ‹éå†æ“ä½œçš„æ‰“å°é¡ºåº</p>
<p>ä¸¾ä¾‹ï¼škey=43 43%16=11.æ‰€ä»¥è¯¥key-valueä¼šå­˜å‚¨åœ¨ç¼–å·ä¸º11çš„æ¡¶ä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMapDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span> <span class="comment">// å› ä¸ºIDEAçš„é›†æˆå·¥ä½œåšå¾—å¤ªæ£’äº†ï¼Œæœ‰æ—¶å€™ä½ çœŸå¼„ä¸æ¸…æ¥šåˆ°åº•æ˜¯è°å®Œæˆäº†å“ªäº›å·¥ä½œ...ğŸ˜³</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTraversal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        HashMap&lt;Integer, String&gt; map = <span class="keyword">new</span> HashMap(<span class="number">16</span>);</span><br><span class="line">        <span class="comment">// å¯ä»¥é¢„è§è¿™äº›key-valueä¼šè¢«æ˜ å°„åˆ°ä»€ä¹ˆåœ°æ–¹å—ï¼Ÿ</span></span><br><span class="line">        map.put(<span class="number">7</span>, <span class="string">""</span>);</span><br><span class="line">        map.put(<span class="number">11</span>, <span class="string">""</span>);</span><br><span class="line">        map.put(<span class="number">43</span>, <span class="string">""</span>);</span><br><span class="line">        map.put(<span class="number">59</span>, <span class="string">""</span>);</span><br><span class="line">        map.put(<span class="number">19</span>, <span class="string">""</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">""</span>);</span><br><span class="line">        map.put(<span class="number">35</span>, <span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"éå†ç»“æœï¼š"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Integer key : map.keySet()) &#123;</span><br><span class="line">            System.out.print(key + <span class="string">" -&gt; "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// é¢„æœŸè¾“å‡ºç»“æœï¼š19 -&gt; 3 -&gt; 35 -&gt; 7 -&gt; 11 -&gt; 43 -&gt; 59 -&gt; </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="å‘å®¹å™¨ä¸­æ’å…¥æ–°çš„key-value"><a href="#å‘å®¹å™¨ä¸­æ’å…¥æ–°çš„key-value" class="headerlink" title="å‘å®¹å™¨ä¸­æ’å…¥æ–°çš„key-value"></a>å‘å®¹å™¨ä¸­æ’å…¥æ–°çš„key-value</h6><blockquote>
<p>æµç¨‹</p>
</blockquote>
<ul>
<li>æ‰¾åˆ°é”®å€¼å¯¹é¢„æœŸæ’å…¥çš„æ¡¶ç¼–å·ï¼›</li>
<li>åˆ¤æ–­æ¡¶æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™ç›´æ¥æ’å…¥key-value;</li>
<li>å¦‚æœä¸ä¸ºç©ºï¼Œåˆ¤æ–­æ¡¶ä¸­çš„èŠ‚ç‚¹æ˜¯å“ªä¸€ç§ç±»å‹çš„èŠ‚ç‚¹ï¼›<ul>
<li>å¦‚æœæ˜¯é“¾è¡¨èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œâ€œå‘é“¾è¡¨ä¸­æ’å…¥æ–°èŠ‚ç‚¹â€çš„æ“ä½œï¼›</li>
<li>å¦‚æœæ˜¯æ ‘èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œâ€œå‘çº¢é»‘æ ‘ä¸­æ’å…¥æ–°èŠ‚ç‚¹â€çš„æ“ä½œï¼›</li>
</ul>
</li>
<li>æ’å…¥æ“ä½œç»“æŸåï¼Œéœ€è¦è€ƒè™‘ä¸¤ä¸ªé—®é¢˜â€”â€”æ‰©å®¹ã€æ ‘åŒ–ï¼›</li>
</ul>
<blockquote>
<p>æ ¸å¿ƒæ“ä½œï¼ˆæºç )</p>
</blockquote>
<p><font size=3>æºç ä¸­æœ‰å¾ˆå¤šä¿è¯å¥å£®æ€§çš„ä»£ç ï¼Œä½†å®ƒä»¬ä¸æ˜¯æ ¸å¿ƒä»£ç ï¼Œå¯ä»¥è·³è¿‡</font></p>
<p><img src="https://s1.ax1x.com/2020/09/02/wpwKl8.jpg" alt="putæ·»åŠ key-valueçš„è¿‡ç¨‹"></p>
<p>è¿™é‡Œæ¯”è¾ƒå›°æƒ‘çš„æ˜¯æ‰¾åˆ°keyç›¸åŒçš„èŠ‚ç‚¹åï¼Œæºç æŠŠæ‰¾åˆ°çš„èŠ‚ç‚¹å­˜å‚¨åˆ°äº†å˜é‡eä¸­ï¼›</p>
<p>å…¶å®åªéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œå¦‚æœæ‰¾åˆ°äº†keyç›¸åŒçš„èŠ‚ç‚¹ï¼Œæ¥ä¸‹æ¥è‚¯å®šéœ€è¦æ‰§è¡Œè¦†ç›–æ“ä½œï¼Œå…·ä½“çš„æ‰‹æ®µå°±è¦çœ‹æºç çš„å…·ä½“å®ç°äº†ã€‚</p>
<h6 id="å¯¹æ•£åˆ—è¡¨è¿›è¡Œæ‰©å®¹æ“ä½œ"><a href="#å¯¹æ•£åˆ—è¡¨è¿›è¡Œæ‰©å®¹æ“ä½œ" class="headerlink" title="å¯¹æ•£åˆ—è¡¨è¿›è¡Œæ‰©å®¹æ“ä½œ"></a>å¯¹æ•£åˆ—è¡¨è¿›è¡Œæ‰©å®¹æ“ä½œ</h6><blockquote>
<p>é¢„å¤‡çŸ¥è¯†</p>
</blockquote>
<ul>
<li>åœ¨ HashMap ä¸­ï¼Œæ¡¶æ•°ç»„çš„é•¿åº¦å‡æ˜¯2çš„å¹‚ï¼Œé˜ˆå€¼å¤§å°ä¸ºæ¡¶æ•°ç»„é•¿åº¦ä¸è´Ÿè½½å› å­çš„ä¹˜ç§¯ã€‚</li>
<li>å½“ HashMap ä¸­çš„é”®å€¼å¯¹æ•°é‡è¶…è¿‡é˜ˆå€¼æ—¶ï¼Œå°±ä¼šè¿›è¡Œæ‰©å®¹æ“ä½œã€‚</li>
</ul>
<p><img src="https://s1.ax1x.com/2020/09/02/wpBtMT.jpg" alt="æ‰©å®¹æ–¹æ³•"></p>
<blockquote>
<p>åŸç†</p>
</blockquote>
<ul>
<li>æŒ‰å½“å‰æ¡¶æ•°ç»„é•¿åº¦çš„2å€è¿›è¡Œæ‰©å®¹ï¼Œé˜ˆå€¼ä¹Ÿå˜ä¸ºåŸæ¥çš„2å€ï¼›</li>
<li>æ‰©å®¹ä¹‹åï¼Œè¦é‡æ–°è®¡ç®—é”®å€¼å¯¹çš„ä½ç½®ï¼Œå¹¶æŠŠå®ƒä»¬ç§»åŠ¨åˆ°åˆé€‚çš„ä½ç½®ä¸Šå»ï¼›</li>
</ul>
<blockquote>
<p>æºç ä¸­çš„æ ¸å¿ƒæ“ä½œ</p>
</blockquote>
<ul>
<li>1 è®¡ç®—æ–°æ¡¶æ•°ç»„çš„å®¹é‡ newCap å’Œæ–°é˜ˆå€¼ newThr</li>
<li>2 æ ¹æ®è®¡ç®—å‡ºçš„ newCap åˆ›å»ºæ–°çš„æ¡¶æ•°ç»„ï¼Œæ¡¶æ•°ç»„ table ä¹Ÿæ˜¯åœ¨è¿™é‡Œè¿›è¡Œåˆå§‹åŒ–çš„</li>
<li>3 å°†é”®å€¼å¯¹èŠ‚ç‚¹é‡æ–°æ˜ å°„åˆ°æ–°çš„æ¡¶æ•°ç»„é‡Œã€‚<ul>
<li>å¦‚æœèŠ‚ç‚¹æ˜¯ TreeNode ç±»å‹ï¼Œåˆ™éœ€è¦æ‹†åˆ†çº¢é»‘æ ‘ã€‚</li>
<li>å¦‚æœæ˜¯æ™®é€šèŠ‚ç‚¹ï¼Œåˆ™èŠ‚ç‚¹æŒ‰åŸé¡ºåºè¿›è¡Œåˆ†ç»„ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>æ ¸å¿ƒæ“ä½œå¯¹åº”çš„ä»£ç - newCap å’Œ newThr è®¡ç®—è¿‡ç¨‹(åˆ†ç±»è®¨è®º)</p>
</blockquote>
<p>â€‹    this is way too much, Can not bear this right now.</p>
<blockquote>
<p>éœ€è¦è®°å¿†çš„ç»“è®º</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯</span></span><br><span class="line"><span class="keyword">if</span> ( oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// åµŒå¥—æ¡ä»¶åˆ†æ”¯</span></span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;...&#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY) &#123;...&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) &#123;...&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªæ¡ä»¶åˆ†æ”¯</span></span><br><span class="line"><span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;...&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p>#Q:initialCapacity å‚æ•°æ²¡æœ‰è¢«ä¿å­˜ä¸‹æ¥ï¼Œé‚£ä¹ˆå®ƒæ€ä¹ˆå‚ä¸æ¡¶æ•°ç»„çš„åˆå§‹åŒ–è¿‡ç¨‹çš„å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">            newCap = oldThr; <span class="comment">// æŠŠæ—§çš„é˜ˆå€¼ç»‘å®šåˆ°newCapä¸Š</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li>#A: ä¸Šè¿°è¯­å¥ç­‰ä»·äº<code>newCap = threshold = tableSizeFor(initialCapacity)</code>ã€‚aka æˆ‘ä»¬åœ¨åˆå§‹åŒ–æ—¶ä¼ å…¥çš„ initialCapacity å‚æ•°ç»è¿‡ threshold ä¸­è½¬æœ€ç»ˆèµ‹å€¼ç»™äº† newCap</li>
</ul>
<ul>
<li><p>#Qï¼šåµŒå¥—åˆ†æ”¯çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>#Aï¼š<ul>
<li>1 å¤„ç†å®¹å™¨å®¹é‡è¾¾åˆ°æé™çš„æƒ…å†µï¼› </li>
<li>2 å¤„ç†å®¹å™¨æ­£å¸¸æ‰©å®¹çš„æƒ…å†µï¼ˆå¯èƒ½å¯¼è‡´newThræº¢å‡ºå½’é›¶ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li><p>#Qï¼šä¸ºä»€ä¹ˆéœ€è¦ç¬¬äºŒä¸ªåˆ†æ”¯ï¼Ÿ</p>
<ul>
<li>#Aï¼š<ul>
<li>ç¬¬ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯æœªè®¡ç®— newThr ;</li>
<li>åµŒå¥—åˆ†æ”¯åœ¨è®¡ç®—è¿‡ç¨‹ä¸­å¯¼è‡´ newThr æº¢å‡ºå½’é›¶çš„æƒ…å†µï¼›</li>
</ul>
</li>
</ul>
</li>
<li><p>é“¾è¡¨æ¡¶ç»è¿‡é‡æ–°æ˜ å°„åï¼Œä¸¤æ¡é“¾è¡¨ä¸­çš„èŠ‚ç‚¹é¡ºåºå¹¶æœªå‘ç”Ÿå˜åŒ–ï¼Œè¿˜æ˜¯ä¿æŒäº†æ‰©å®¹å‰çš„é¡ºåºã€‚</p>
</li>
</ul>
<h6 id="é“¾è¡¨æ ‘åŒ–"><a href="#é“¾è¡¨æ ‘åŒ–" class="headerlink" title="é“¾è¡¨æ ‘åŒ–"></a>é“¾è¡¨æ ‘åŒ–</h6><p>the details is overwhelming, so weâ€™ll just jump into the conclusion.</p>
<blockquote>
<p> åœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œæ ‘åŒ–è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
</blockquote>
<ul>
<li>é“¾è¡¨é•¿åº¦å¤§äºç­‰äº TREEIFY_THRESHOLD</li>
<li>æ¡¶æ•°ç»„å®¹é‡å¤§äºç­‰äº MIN_TREEIFY_CAPACITY<ul>
<li>åŸå› ï¼š<ul>
<li>1 å½“æ¡¶æ•°ç»„å®¹é‡æ¯”è¾ƒå°æ—¶ï¼Œé”®å€¼å¯¹èŠ‚ç‚¹ hash çš„ç¢°æ’ç‡å¯èƒ½ä¼šæ¯”è¾ƒé«˜ï¼Œè¿›è€Œå¯¼è‡´é“¾è¡¨é•¿åº¦è¾ƒé•¿ï¼›</li>
<li>2 è¿™ä¸ªæ—¶å€™åº”è¯¥ä¼˜å…ˆæ‰©å®¹ï¼Œè€Œä¸æ˜¯ç«‹é©¬æ ‘åŒ–â€”â€”é«˜ç¢°æ’ç‡æ˜¯å› ä¸ºæ¡¶æ•°ç»„å®¹é‡è¾ƒå°å¼•èµ·çš„ï¼Œè¿™ä¸ªæ˜¯ä¸»å› ï¼›</li>
<li>3 å®¹é‡å°æ—¶ï¼Œä¼˜å…ˆæ‰©å®¹å¯ä»¥é¿å…ä¸€äº›åˆ—çš„ä¸å¿…è¦çš„æ ‘åŒ–è¿‡ç¨‹ï¼›</li>
<li>4 åŒæ—¶ï¼Œæ¡¶å®¹é‡è¾ƒå°æ—¶ï¼Œæ‰©å®¹ä¼šæ¯”è¾ƒé¢‘ç¹ï¼Œè€Œæ‰©å®¹æ—¶éœ€è¦æ‹†åˆ†çº¢é»‘æ ‘å¹¶é‡æ–°æ˜ å°„â€”â€”æ‰€ä»¥åœ¨æ¡¶å®¹é‡æ¯”è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œå°†é•¿é“¾è¡¨è½¬æˆçº¢é»‘æ ‘æ˜¯ä¸€ä»¶åƒåŠ›ä¸è®¨å¥½çš„äº‹ï¼›</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>treeifyBin æ–¹æ³•</p>
</blockquote>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>1 å°†æ™®é€šé“¾è¡¨è½¬æˆä¸ºç”± TreeNode å‹èŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨;</li>
<li>2 ç„¶åå†è°ƒç”¨treeifyæ¥å°†è¯¥é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ï¼›</li>
</ul>
<p>TreeNodeé—´æ¥ç»§æ‰¿è‡ªNodeï¼Œæ‰€ä»¥åŒ…å«nextæŒ‡é’ˆã€‚å› æ­¤é€šè¿‡TreeNodeå°±èƒ½ä¿å­˜åŸå§‹é“¾è¡¨ä¸­çš„èŠ‚ç‚¹é¡ºåºï¼›</p>
<blockquote>
<p>æ ‘åŒ–å¸¦æ¥çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<ul>
<li>é—®é¢˜ï¼šæ ‘åŒ–è¿‡ç¨‹ä¸­éœ€è¦æ¯”è¾ƒé”®å¯¹è±¡çš„å¤§å°ï¼Œä½†æ˜¯HashMapå¹¶æ²¡æœ‰å¼ºåˆ¶è¦æ±‚é”®å¯¹è±¡ä¸€å®šè¦å®ç°Comparableæ¥å£ã€‚SO,å¦‚æœé”®å¹¶æ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œæ ‘åŒ–è¦æ€ä¹ˆè¿›è¡Œå‘¢ï¼Ÿ</li>
<li>æ‰‹æ®µï¼š<ul>
<li>1 æ¯”è¾ƒé”®ä¸é”®ä¹‹é—´ hash çš„å¤§å°ï¼Œå¦‚æœ hash ç›¸åŒï¼Œç»§ç»­å¾€ä¸‹æ¯”è¾ƒ</li>
<li>2 æ£€æµ‹é”®ç±»æ˜¯å¦å®ç°äº† Comparable æ¥å£ï¼Œå¦‚æœå®ç°è°ƒç”¨ compareTo æ–¹æ³•è¿›è¡Œæ¯”è¾ƒ</li>
<li>3 å¦‚æœä»æœªæ¯”è¾ƒå‡ºå¤§å°ï¼Œå°±éœ€è¦è¿›è¡Œä»²è£äº†ï¼Œä»²è£æ–¹æ³•ä¸º tieBreakOrderï¼ˆå¤§å®¶è‡ªå·±çœ‹æºç å§ï¼‰</li>
</ul>
</li>
</ul>
<p><font size=2>tieBreak(èµ›ç‚¹)</font></p>
<blockquote>
<p>æ ‘åŒ–å‰åå¯¹æ¯”</p>
</blockquote>
<ul>
<li><p>æ ‘åŒ–å‰</p>
<p><img src="https://s1.ax1x.com/2020/09/02/wpLK3t.png" alt="æ¡¶ä¸­çš„é“¾è¡¨ç»“æ„"></p>
</li>
<li><p>æ ‘åŒ–å</p>
<p><img src="https://s1.ax1x.com/2020/09/02/wpOua4.png" alt="æ¡¶ä¸­çš„çº¢é»‘æ ‘ç»“æ„"></p>
<p>æ©™è‰²çš„ç®­å¤´è¡¨ç¤º TreeNode çš„ next å¼•ç”¨</p>
</li>
<li><p>ç‰¹å¾ï¼š</p>
<ul>
<li>åŸé“¾è¡¨çš„é¡ºåºä»æ—§ä¿æŒï¼ˆçº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ä¼šè¢«ç§»åŠ¨åˆ°é“¾è¡¨çš„ç¬¬ä¸€ä½ï¼‰ï¼ŒSO,å¯ä»¥æŒ‰éå†é“¾è¡¨çš„æ–¹å¼å»éå†ä¸Šé¢çš„çº¢é»‘æ ‘;</li>
<li>è¿™ç§ç»“æ„éå¸¸æœ‰åˆ©äºçº¢é»‘æ ‘çš„åˆ‡åˆ† &amp; çº¢é»‘æ ‘è½¬æ¢ä¸ºé“¾è¡¨çš„æ“ä½œ</li>
</ul>
</li>
</ul>
<h6 id="çº¢é»‘æ ‘æ‹†åˆ†"><a href="#çº¢é»‘æ ‘æ‹†åˆ†" class="headerlink" title="çº¢é»‘æ ‘æ‹†åˆ†"></a>çº¢é»‘æ ‘æ‹†åˆ†</h6><blockquote>
<p>è¯´æ˜ï¼šæ•£åˆ—æ•°ç»„æ‰©å®¹åï¼Œéœ€è¦ä¸ºå…ˆå‰å­˜å‚¨çš„é”®å€¼å¯¹é‡æ–°æ‰¾åˆ°å­˜å‚¨ä½ç½®ï¼ˆé‡æ–°æ˜ å°„ï¼‰ã€‚é“¾è¡¨å’Œçº¢é»‘æ ‘ä¸Šçš„èŠ‚ç‚¹è¦æ€ä¹ˆé‡æ–°æ˜ å°„å‘¢ï¼Ÿ</p>
</blockquote>
<ul>
<li><p>é“¾è¡¨ï¼šä¾æ¬¡å–å‡ºé“¾è¡¨ä¸Šçš„èŠ‚ç‚¹ï¼Œç„¶åæŠŠå®ƒé‡æ–°æ˜ å°„åˆ°æ–°çš„æ•£åˆ—æ•°ç»„ä¸­å³å¯ï¼›</p>
</li>
<li><p>çº¢é»‘æ ‘ï¼š</p>
<ul>
<li>æ‰‹æ®µ1ï¼š<ul>
<li>1 å…ˆæŠŠçº¢é»‘æ ‘è½¬æ¢æˆé“¾è¡¨ï¼›</li>
<li>2 ç„¶åæŒ‰ç…§é“¾è¡¨çš„æ–¹å¼å¯¹æ‰€æœ‰çš„é”®å€¼å¯¹é‡æ–°æ˜ å°„ï¼›</li>
</ul>
</li>
<li>æ‰‹æ®µ2ï¼š<ul>
<li>åŸç†ï¼šåœ¨å°†æ™®é€šé“¾è¡¨è½¬æˆçº¢é»‘æ ‘æ—¶ï¼ŒHashMap é€šè¿‡ä¸¤ä¸ªé¢å¤–çš„å¼•ç”¨ next å’Œ prev ä¿ç•™äº†åŸé“¾è¡¨çš„èŠ‚ç‚¹é¡ºåºï¼›</li>
<li>æ‰€ä»¥ï¼Œåœ¨é‡æ–°æ˜ å°„çº¢é»‘æ ‘æ—¶ï¼Œå°±èƒ½å¤ŸæŒ‰ç…§æ˜ å°„é“¾è¡¨çš„æ–¹å¼è¿›è¡Œæ˜ å°„ï¼›</li>
<li>ç‰¹å¾ï¼š<ul>
<li>1 é‡æ–°æ˜ å°„çº¢é»‘æ ‘çš„é€»è¾‘å’Œé‡æ–°æ˜ å°„é“¾è¡¨çš„é€»è¾‘åŸºæœ¬ä¸€è‡´ï¼›</li>
<li>2 ä½†æ˜¯é‡æ–°æ˜ å°„åï¼Œä¼šå°†çº¢é»‘æ ‘æ‹†åˆ†æˆä¸¤æ¡<em>ç”± TreeNode ç»„æˆçš„é“¾è¡¨</em>ï¼›</li>
<li>3 å¦‚æœé“¾è¡¨é•¿åº¦å°äº UNTREEIFY_THRESHOLDï¼Œåˆ™<ul>
<li>å°†é“¾è¡¨è½¬æ¢æˆæ™®é€šé“¾è¡¨ï¼ˆNodeï¼‰ï¼›</li>
<li>å¦åˆ™æ ¹æ®æ¡ä»¶é‡æ–°å°† TreeNode é“¾è¡¨æ ‘åŒ–ï¼ˆtreeifyï¼‰ï¼›</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://s1.ax1x.com/2020/09/02/wpX3kQ.png" alt="RBTé‡æ–°æ˜ å°„å"></p>
</li>
</ul>
<h6 id="çº¢é»‘æ ‘é“¾åŒ–"><a href="#çº¢é»‘æ ‘é“¾åŒ–" class="headerlink" title="çº¢é»‘æ ‘é“¾åŒ–"></a>çº¢é»‘æ ‘é“¾åŒ–</h6><ul>
<li>åŸç†ï¼šçº¢é»‘æ ‘ä¸­ä»ç„¶ä¿ç•™äº†åŸé“¾è¡¨èŠ‚ç‚¹é¡ºåºï¼›</li>
<li>æ‰‹æ®µ(Thus)ï¼šå°† TreeNode é“¾è¡¨è½¬æˆ Node ç±»å‹çš„é“¾è¡¨ï¼›</li>
</ul>
<p>I do not really understand how does this work, yet time is consumingâ€¦</p>
<h6 id="ä»å®¹å™¨ä¸­åˆ é™¤é”®å€¼å¯¹"><a href="#ä»å®¹å™¨ä¸­åˆ é™¤é”®å€¼å¯¹" class="headerlink" title="ä»å®¹å™¨ä¸­åˆ é™¤é”®å€¼å¯¹"></a>ä»å®¹å™¨ä¸­åˆ é™¤é”®å€¼å¯¹</h6><blockquote>
<p>æµç¨‹</p>
</blockquote>
<ul>
<li>ç¬¬ä¸€æ­¥æ˜¯å®šä½æ¡¶ä½ç½®ï¼›</li>
<li>ç¬¬äºŒæ­¥éå†é“¾è¡¨å¹¶æ‰¾åˆ°é”®å€¼ç›¸ç­‰çš„èŠ‚ç‚¹ï¼›</li>
<li>ç¬¬ä¸‰æ­¥åˆ é™¤èŠ‚ç‚¹ã€‚</li>
</ul>
<blockquote>
<p>æºç </p>
</blockquote>
<p><img src="https://s1.ax1x.com/2020/09/02/wpjDDf.jpg" alt="å…ˆæ‰¾åˆ°ååˆ é™¤"></p>
<p><img src="https://s1.ax1x.com/2020/09/02/wpvCIe.jpg" alt="åˆ é™¤æµç¨‹"></p>
<h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h5><ul>
<li>åœ¨JDK8ä¸­HashMapçš„åº•å±‚æ•°æ®ç»“æ„ä¸ºï¼š<strong>æ•°ç»„+é“¾è¡¨(æ•£åˆ—è¡¨)+çº¢é»‘æ ‘</strong>ï¼›</li>
<li>å½“åˆå§‹å®¹é‡ * è£…è½½å› å­ &lt; HashMapä¸­çš„é”®å€¼å¯¹æ•°é‡æ—¶ï¼Œå¯¹æ•£åˆ—æ•°ç»„/æ¡¶æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼›</li>
<li>è£…åœ¨å› å­loadFactoré»˜è®¤ä¸º0.75;ã€æ•£åˆ—å†²çª VS æ‰©å®¹æ“ä½œã€‘</li>
<li>åˆå§‹å®¹é‡é»˜è®¤ä¸º16ï¼›ã€ç©ºé—´ VS æ—¶é—´ã€‘</li>
<li>è®¡ç®—keyçš„hashå€¼ï¼šå°†keyçš„å“ˆå¸Œå€¼çš„é«˜16ä½è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œä»¥æ­¤æ¥å¢åŠ éšæœºæ€§ï¼›</li>
<li>å¹¶ä¸æ˜¯æ¡¶å­ä¸Šæœ‰8ä½å…ƒç´ çš„æ—¶å€™å®ƒå°±èƒ½å˜æˆçº¢é»‘æ ‘ï¼Œå®ƒå¾—åŒæ—¶æ»¡è¶³æˆ‘ä»¬çš„æ•£åˆ—è¡¨å®¹é‡å¤§äº64æ‰è¡Œï¼›</li>
</ul>
<blockquote>
<p>what have I done?!</p>
</blockquote>
<h5 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="http://www.tianxiaobo.com/2018/01/18/HashMap-%E6%BA%90%E7%A0%81%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90-JDK1-8/#342-%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6">http://www.tianxiaobo.com/2018/01/18/HashMap-%E6%BA%90%E7%A0%81%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90-JDK1-8/#342-%E6%89%A9%E5%AE%B9%E6%9C%BA%E5%88%B6</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&amp;mid=2247484139&amp;idx=1&amp;sn=bb73ac07081edabeaa199d973c3cc2b0&amp;chksm=ebd743eadca0cafc532f298b6ab98b08205e87e37af6a6a2d33f5f2acaae245057fa01bd93f4&amp;scene=21#wechat_redirect">https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&amp;mid=2247484139&amp;idx=1&amp;sn=bb73ac07081edabeaa199d973c3cc2b0&amp;chksm=ebd743eadca0cafc532f298b6ab98b08205e87e37af6a6a2d33f5f2acaae245057fa01bd93f4&amp;scene=21#wechat_redirect</a></p>

    </div>

    
    
    

      
        
          <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">
            -------------æœ¬æ–‡ç»“æŸ
            <i class="fa fa-paw"></i>
            æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------
        </div>
    
</div>
        
      

      
        
          
        
      

      <footer class="post-footer">
          <div class="post-tags">
              
              <a href="/tags/Java-stuff/" rel="tag"><i class="fa fa-tag"></i> Java stuff</a>
              
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/interview/2020/08/28/interview/20200826-%E8%AE%B0%E4%B8%80%E6%AC%A1%E9%9D%A2%E8%AF%95%EF%BC%88%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%EF%BC%89_java%E5%9F%BA%E7%A1%80%E4%B9%8B%E7%BA%BF%E7%A8%8B%E6%B1%A0.html" rel="prev" title="è®°ä¸€æ¬¡é¢è¯•ï¼ˆå­—èŠ‚è·³åŠ¨ï¼‰_javaåŸºç¡€ä¹‹çº¿ç¨‹æ± ">
                  <i class="fa fa-chevron-left"></i> è®°ä¸€æ¬¡é¢è¯•ï¼ˆå­—èŠ‚è·³åŠ¨ï¼‰_javaåŸºç¡€ä¹‹çº¿ç¨‹æ± 
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
      </footer>
    
  </article>
  
  
  



      
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">henryInSH</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">76k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">1:09</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  <script src="/js/local-search.js"></script>












  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      const visitors = document.querySelector('.leancloud_visitors');
      const url = decodeURI(visitors.id);
      const title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            const counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      const visitors = document.querySelectorAll('.leancloud_visitors');
      const entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            const target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    const { app_id, app_key, server_url } = {"enable":true,"app_id":"UniIgz3JDa7i7uw8D3N3lo3o-gzGzoHsz# <your app id>","app_key":"X24wntmAxHx5dzjdEq87nF2H# <your app key>","server_url":null,"security":true};
    function fetchData(api_server) {
      const Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    const api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


  

  
<script>
NexT.utils.loadComments('#valine-comments', () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    new Valine(Object.assign({
      el  : '#valine-comments',
      path: location.pathname,
    }, {"enable":true,"appId":"UniIgz3JDa7i7uw8D3N3lo3o-gzGzoHsz","appKey":"X24wntmAxHx5dzjdEq87nF2H","placeholder":"Just go go","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"lang":null,"visitor":false,"comment_count":true,"recordIP":false,"serverURLs":null,"enableQQ":false,"requiredFields":[]}
    ));
  }, window.Valine);
});
</script>

</body>
</html>
